<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="report_stock_inventory">
        <t t-call="web.external_layout">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <div>
                        <div class="text-center" style="margin: 50px; padding: 50px;">
                            <h2>Inventory Movement</h2>
                        </div>
                        <div>

                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th class="text-left"><span>From Date</span></th>
                                        <th class="text-left"><span>To Date</span></th>
                                        <th class="text-left">
                                            <span>Warehouse</span>
                                        </th>
                                        <th class="text-left">
                                            <t t-if="o.filter_by == 'product'">
                                                <strong>Products</strong>
                                            </t>
                                            <t t-if="o.filter_by != 'product'">
                                                <strong>Product Categories</strong>
                                            </t>
                                        </th>
                                        <th>
                                            <span>Available in POS</span>
                                        </th>
                                        <!-- <th class="text-left"><span>Locations</span></th> -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <td class="text-left"><p t-esc="o.get_date_as_per_user_timezone(o.from_date)"/></td>
                                    <td class="text-left"><p t-esc="o.get_date_as_per_user_timezone(o.to_date)"/></td>
                                    <td class="text-left"><p t-field="o.warehouse_id.name"/></td>
                                    <td class="text-left"><p t-esc="o.get_product_categ_name()"/></td>
                                    <td class="text-left">
                                        <t t-if="o.available_in_pos">
                                            Yes
                                        </t>
                                        <t t-if="not o.available_in_pos">
                                            No
                                        </t>
                                    </td>

                                    <!-- <td class="text-left"><p t-esc="o.get_locations_name()"/></td> -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="page">
                        <t t-set="initial_qty_total" t-value="0"/>
                        <t t-set="delivered_qty_total" t-value="0"/>
                        <t t-set="received_qty_total" t-value="0"/>
                        <t t-set="internal_transfer_total" t-value="0"/>
                        <t t-set="adjustment_total" t-value="0"/>
                        <t t-set="balance_qty_total" t-value="0"/>
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <t t-set="colspan" t-value="6"/>
                                    <th class="text-left"><span>Product</span></th>
                                    <th class="text-left"><span>Description</span></th>
                                    <th class="text-left"><span>UOM</span></th>
                                    <th class="text-right"><span>Open Balance</span></th>
                                    <th class="text-right"><span>Sales</span></th>
                                    <th class="text-right"><span>Transfer In</span></th>
                                    <th class="text-right"><span>Transfer Out</span></th>
                                    <th class="text-right"><span>Adjustment</span></th>
                                    <th class="text-right"><span>Balance</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="o.get_products()" t-as="report_data">
                                    <td class="text-left">
                                        <t t-esc="report_data_value.get('product')" />
                                    </td>
                                    <td class="text-left">
                                        <t t-esc="report_data_value.get('product_code')" />
                                    </td>
                                    <td class="text-left">
                                        <t t-esc="report_data_value.get('uom_id')" />
                                    </td>
                                    <td class="text-right">
                                        <t t-esc="report_data_value.get('initial_qty')" />
                                        <t t-set="initial_qty_total" t-value="initial_qty_total + report_data_value.get('initial_qty')"/>
                                    </td>
                                    <td class="text-right">
                                        <t t-esc="report_data_value.get('delivered_qty')" />
                                        <t t-set="delivered_qty_total" t-value="delivered_qty_total + report_data_value.get('delivered_qty')"/>
                                    </td>
                                    <td class="text-right">
                                        <t t-esc="report_data_value.get('received_qty')" />
                                        <t t-set="received_qty_total" t-value="received_qty_total + report_data_value.get('received_qty')"/>
                                    </td>
                                    <td class="text-right">
                                        <t t-esc="report_data_value.get('internal_transfer')" />
                                        <t t-set="internal_transfer_total" t-value="internal_transfer_total + report_data_value.get('internal_transfer')"/>
                                    </td>
                                    <td class="text-right">
                                        <t t-esc="report_data_value.get('adjustment')" />
                                        <t t-set="adjustment_total" t-value="adjustment_total + report_data_value.get('adjustment')"/>
                                    </td>
                                    <td class="text-right">
                                        <t t-esc="report_data_value.get('balance_qty')" />
                                        <t t-set="balance_qty_total" t-value="balance_qty_total + report_data_value.get('balance_qty')"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3" class="text-right">
                                        <strong>Total </strong>
                                    </td>
                                    <td class="text-right">
                                        <strong><t t-esc="initial_qty_total" /></strong>
                                    </td>
                                    <td class="text-right">
                                        <strong><t t-esc="delivered_qty_total" /></strong>
                                    </td>
                                    <td class="text-right">
                                        <strong><t t-esc="received_qty_total" /></strong>
                                    </td>
                                    <td class="text-right">
                                        <strong><t t-esc="internal_transfer_total" /></strong>
                                    </td>
                                    <td class="text-right">
                                        <strong><t t-esc="adjustment_total" /></strong>
                                    </td>
                                    <td class="text-right">
                                        <strong><t t-esc="balance_qty_total" /></strong>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>